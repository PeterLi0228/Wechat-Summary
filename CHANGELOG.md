# 更新日志

## 2024-01-XX - 功能优化更新 v2

### ✨ 新增功能

#### 1. 时间轴筛选功能
- 在聊天详情页添加了时间轴筛选器
- 支持通过滑块选择时间范围（0:00-24:00）
- 可以精确到10分钟间隔
- 实时筛选显示指定时间段的聊天记录
- 支持手动输入精确时间（点击时间显示区域）

#### 2. 文件管理优化
- 支持只有TXT文件的日期显示和浏览
- 动态文件发现机制，自动检测最近30天的聊天文件
- 改进的刷新功能，重新扫描可用文件
- 汇总按钮智能提示：缺少HTML文件时显示友好错误信息

### 🔧 功能移除

#### 1. 移除亮点功能
- 完全移除了亮点检测和显示功能
- 简化了数据结构和界面显示
- 专注于核心的聊天记录浏览功能

#### 2. 过滤拍一拍消息
- 自动过滤所有"拍了拍"相关的消息
- 减少无意义内容的干扰
- 应用于所有界面（首页、聊天详情、搜索等）

---

## 2024-01-XX - 功能优化更新 v1

### ✨ 新增功能

#### 1. 日期筛选功能
- 在首页聊天记录列表左侧添加了日期筛选器
- 支持日历弹窗选择具体日期
- 只显示有聊天记录的日期可选
- 支持清除筛选，恢复显示所有记录
- 统计数据会根据筛选结果动态更新

#### 2. 聊天详情页优化
- 默认显示TXT格式的结构化聊天记录
- 移除了分享按钮
- 汇总按钮现在会在新窗口中打开HTML格式的完整聊天记录
- 如果没有HTML文件，汇总按钮会被禁用

### 🔧 功能改进

#### 1. 日期显示格式统一
- 所有页面的日期显示格式统一为"YYYY年MM月DD日"
- 移除了"今天"、"昨天"的相对时间显示
- 提供更明确的绝对时间信息

#### 2. 聊天记录加载逻辑优化
- 优先加载TXT文件用于日常浏览
- 同时尝试加载HTML文件用于汇总功能
- 改进了错误处理和用户提示

### 🎨 UI/UX 改进

#### 1. 首页布局优化
- 在聊天记录标题旁添加了日期筛选控件
- 筛选器采用现代化的弹窗日历设计
- 支持快速清除筛选的便捷操作

#### 2. 聊天详情页简化
- 移除了不必要的模式切换标签
- 简化了头部信息显示
- 专注于TXT格式的消息浏览体验

### 📱 用户体验提升

#### 1. 响应式筛选
- 日期筛选结果实时更新
- 统计数据同步刷新
- 提供清晰的"无记录"状态提示

#### 2. 智能文件处理
- 自动检测可用的文件格式
- 优雅降级处理缺失文件
- 提供有意义的错误提示

### 🛠️ 技术改进

#### 1. 新增依赖
- 使用 `date-fns` 进行日期格式化
- 集成 `@/components/ui/calendar` 日历组件
- 添加 `@/components/ui/popover` 弹窗组件

#### 2. 代码优化
- 改进了日期处理工具函数
- 优化了文件加载逻辑
- 增强了错误处理机制

---

## 使用说明

### 日期筛选功能
1. 在首页点击"选择日期筛选"按钮
2. 在弹出的日历中选择要查看的日期
3. 页面会自动筛选并显示该日期的记录
4. 点击"清除"按钮可以恢复显示所有记录

### 聊天记录查看
1. 点击任意日期卡片进入聊天详情页
2. 默认显示结构化的TXT格式聊天记录
3. 使用搜索框可以快速查找特定内容
4. 点击"汇总"按钮在新窗口查看完整HTML格式记录

### 文件要求
- TXT文件：用于日常浏览，格式为结构化文本
- HTML文件：用于汇总功能，包含完整样式和布局
- 文件命名：`YYYYMMDD.txt` 和 `YYYYMMDD.html`

---

**更新完成！享受更好的群聊记录管理体验！** 🎉 